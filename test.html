<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Orders</title>
</head>
<body>
    <select id="apiSelect">
        <option value="/api/get-orders">Get Orders</option>
        <!-- Добавьте другие опции, если необходимо -->
    </select>
    <button onclick="displayOrders()">Display Orders</button>
    <table id="ordersTable" border="1">
        <tr>
            <th>Hash Name</th>
        </tr>
    </table>
    <div id="errorContainer" style="color: red;"></div>

    <script>
        const ordersTable = document.getElementById('ordersTable');
        const errorContainer = document.getElementById('errorContainer');

        async function displayOrders() {
            try {
                const selectedApiUrl = document.getElementById('apiSelect').value;
                console.log(`Selected API URL: ${selectedApiUrl}`); // Debugging line
                const orders = await fetchOrdersFromApi(selectedApiUrl);
                console.log('Fetched orders:', orders); // Debugging line
                ordersTable.innerHTML = `
                    <tr>
                        <th>Hash Name</th>
                    </tr>
                `;

                orders.forEach(order => {
                    const row = ordersTable.insertRow();
                    const cellHashName = row.insertCell(0);

                    cellHashName.textContent = order.hash_name;
                });
            } catch (error) {
                displayError(`Ошибка при отображении ордеров: ${error.message}`);
            }
        }

        async function fetchOrdersFromApi(apiUrl) {
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error(`Ошибка при получении ордеров с ${apiUrl}: ${response.status}, ${response.statusText}`);
                }

                const data = await response.json();
                if (data.success) {
                    return data.orders;
                } else {
                    throw new Error(`Не удалось получить ордера с ${apiUrl}: ${data.message}`);
                }
            } catch (error) {
                displayError(`Ошибка при получении ордеров с ${apiUrl}: ${error.message}`);
                return [];
            }
        }

        function displayError(message) {
            errorContainer.textContent = message;
            console.error(message); // Debugging line
        }
    </script>
</body>
</html>
